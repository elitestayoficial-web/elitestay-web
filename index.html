<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EliteStayTravel.com - Luxury & Sustainable Stays</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://elitestaytravel.com/favicon.png">
    
    <!-- Script publicitario -->
    <script data-noptimize="1" data-cfasync="false" data-wpfc-render="false" defer>
      (function () {
          var script = document.createElement("script");
          script.async = 1;
          script.src = 'https://emrldco.com/NDk4OTAz.js?t=498903';
          document.head.appendChild(script);
      })();
    </script>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fuentes premium -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Playfair+Display:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* ===== VARIABLES DE TEMA ===== */
        :root {
            --bg-primary: #0a0c12;
            --bg-secondary: #14181f;
            --text-primary: #ffffff;
            --text-secondary: #a1a9b5;
            --accent-gold: #b89b5e;
            --accent-gold-light: #d4b67c;
            --accent-emerald: #2b6d5c;
            --border-light: rgba(180, 155, 94, 0.15);
            --card-bg: rgba(20, 24, 31, 0.8);
            --shadow-color: rgba(0, 0, 0, 0.5);
        }
        
        /* TEMA CLARO */
        [data-theme="light"] {
            --bg-primary: #f5f2eb;
            --bg-secondary: #ffffff;
            --text-primary: #1a1c22;
            --text-secondary: #4a4e5a;
            --accent-gold: #9f8349;
            --accent-gold-light: #b89b5e;
            --accent-emerald: #1e5a4b;
            --border-light: rgba(159, 131, 73, 0.2);
            --card-bg: rgba(255, 255, 255, 0.95);
            --shadow-color: rgba(0, 0, 0, 0.1);
        }
        
        body { 
            background: var(--bg-primary); 
            color: var(--text-primary); 
            font-family: 'Inter', sans-serif;
            font-weight: 300;
            transition: background 0.3s ease, color 0.3s ease;
        }
        
        /* ===== ESTILOS PARA CALENDARIO ===== */
        input[type="date"] {
            color-scheme: light;
            background-color: var(--bg-primary);
            color: var(--text-primary);
        }
        
        input[type="date"]::-webkit-calendar-picker-indicator {
            filter: invert(0.8) sepia(0.3) hue-rotate(320deg) brightness(1.2);
            cursor: pointer;
            opacity: 0.8;
            padding: 4px;
        }
        
        input[type="date"]::-webkit-calendar-picker-indicator:hover {
            opacity: 1;
            filter: invert(0.9) sepia(0.5) hue-rotate(320deg) brightness(1.4);
        }
        
        h1, h2, h3, h4, .font-serif {
            font-family: 'Playfair Display', serif;
            font-weight: 600;
            letter-spacing: -0.02em;
        }
        
        .glass-premium {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-light);
            box-shadow: 0 15px 35px -10px var(--shadow-color);
        }
        
        .btn-gold {
            background: transparent;
            border: 1.5px solid var(--accent-gold);
            color: var(--accent-gold);
            transition: all 0.3s ease;
        }
        .btn-gold:hover {
            background: var(--accent-gold);
            color: var(--bg-primary);
            transform: translateY(-2px);
        }
        
        .btn-silver {
            background: transparent;
            border: 1px solid var(--text-secondary);
            color: var(--text-secondary);
        }
        .btn-silver:hover {
            border-color: var(--accent-gold);
            color: var(--accent-gold);
        }
        
        .input-luxury {
            background: var(--bg-primary);
            border: 1px solid var(--border-light);
            color: var(--text-primary);
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
        }
        .input-luxury:focus {
            border-color: var(--accent-gold);
            outline: none;
        }
        
        .selector-premium {
            background: var(--bg-primary);
            border: 1px solid var(--border-light);
            color: var(--text-primary);
            padding: 0.5rem 2rem 0.5rem 1rem;
            border-radius: 2rem;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20' stroke='%23b89b5e'%3E%3Cpath stroke-linecap='round' stroke-linecap='round' d='M6 8l4 4 4-4'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1.2rem;
        }
        
        .badge-eco {
            background: rgba(43, 109, 92, 0.15);
            border: 1px solid rgba(43, 109, 92, 0.4);
            color: var(--accent-emerald);
            font-size: 0.7rem;
            padding: 0.25rem 0.75rem;
            border-radius: 2rem;
        }
        
        .badge-gold {
            background: rgba(180, 155, 94, 0.15);
            border: 1px solid var(--accent-gold);
            color: var(--accent-gold);
            font-size: 0.65rem;
            padding: 0.25rem 0.75rem;
            border-radius: 2rem;
            text-transform: uppercase;
        }
        
        .hotel-card {
            transition: all 0.3s ease;
            background: var(--card-bg);
            border: 1px solid var(--border-light);
        }
        .hotel-card:hover {
            transform: translateY(-4px);
            border-color: var(--accent-gold);
            box-shadow: 0 20px 40px -15px var(--shadow-color);
        }
        
        .hotel-img-container {
            height: 220px;
            overflow: hidden;
            border-radius: 0.75rem 0.75rem 0 0;
        }
        .hotel-img-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }
        .hotel-card:hover .hotel-img-container img {
            transform: scale(1.05);
        }
        
        .filter-section {
            background: var(--card-bg);
            border: 1px solid var(--border-light);
            border-radius: 1rem;
            padding: 1rem;
        }
        
        .filter-range {
            width: 100%;
            accent-color: var(--accent-gold);
        }
        
        .stat-card {
            background: var(--card-bg);
            border: 1px solid var(--border-light);
            padding: 1rem;
            border-radius: 0.75rem;
        }
        
        .stat-bar {
            height: 4px;
            background: rgba(180, 155, 94, 0.1);
            border-radius: 2px;
        }
        .stat-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-gold), var(--accent-gold-light));
            border-radius: 2px;
        }
        
        .ad-container {
            background: var(--card-bg);
            border: 1px solid var(--border-light);
            border-radius: 0.75rem;
        }
        .ad-label {
            font-size: 0.5rem;
            letter-spacing: 0.3em;
            color: var(--text-secondary);
            opacity: 0.5;
            text-transform: uppercase;
        }
        
        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in-up {
            animation: fadeUp 0.5s ease forwards;
        }
    </style>
</head>
<body class="p-3 md:p-6 antialiased">
    
    <!-- ===== HEADER ===== -->
    <header class="max-w-7xl mx-auto">
        <div class="flex justify-between items-center mb-8">
            <div>
                <h1 class="text-2xl md:text-3xl font-black font-serif">
                    <span class="text-[var(--text-primary)]">ELITE</span>
                    <span class="text-[var(--accent-gold)]">STAY</span>
                    <span class="text-sm font-light text-[var(--text-secondary)] ml-2">.com</span>
                </h1>
                <p class="text-[0.5rem] text-[var(--accent-gold)] tracking-[0.3em] uppercase mt-1">Travel in luxury, live sustainably</p>
            </div>
            
            <div class="flex items-center gap-3">
                <button onclick="toggleTheme()" class="selector-premium !p-2 !bg-transparent" id="themeToggle">
                    <i class="fa-regular fa-sun"></i>
                </button>
                
                <select id="lang" onchange="updateLang()" class="selector-premium text-sm">
                    <option value="es">üá™üá∏ ES</option>
                    <option value="en">üá∫üá∏ EN</option>
                    <option value="fr">üá´üá∑ FR</option>
                </select>
            </div>
        </div>
        
        <!-- AD 1: Header -->
        <div class="ad-container p-2 text-center mb-8">
            <div class="ad-label">PUBLICIDAD</div>
            <div class="h-20 flex items-center justify-center text-[var(--text-secondary)] text-xs">
                <i class="fa-regular fa-rectangle-ad mr-2"></i> Espacio publicitario 728x90
            </div>
        </div>
    </header>
    
    <!-- ===== MAIN CONTENT ===== -->
    <main class="max-w-7xl mx-auto">
        
        <!-- ===== BUSCADOR ===== -->
        <div class="glass-premium p-6 md:p-8 rounded-2xl mb-10">
            <h2 class="text-xl md:text-2xl font-serif mb-6 text-center">
                <span id="search-title">Encuentra tu</span> 
                <span class="text-[var(--accent-gold)]" id="search-highlight">refugio exclusivo</span>
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-5 gap-3">
                <div class="md:col-span-2">
                    <label id="l-dest" class="text-[0.6rem] text-[var(--accent-gold)] uppercase tracking-widest">Destino</label>
                    <input id="city" type="text" placeholder="Ej: Paris, Roma, Tokio..." class="input-luxury w-full text-sm mt-1">
                </div>
                <div>
                    <label id="l-in" class="text-[0.6rem] text-[var(--accent-gold)] uppercase tracking-widest">Llegada</label>
                    <input id="cin" type="date" class="input-luxury w-full text-sm mt-1">
                </div>
                <div>
                    <label id="l-out" class="text-[0.6rem] text-[var(--accent-gold)] uppercase tracking-widest">Salida</label>
                    <input id="cout" type="date" class="input-luxury w-full text-sm mt-1">
                </div>
                <div class="flex items-end">
                    <button id="btn" onclick="buscar()" class="btn-gold w-full py-3 rounded-lg text-xs font-bold uppercase tracking-wider">
                        Buscar
                    </button>
                </div>
            </div>
        </div>
        
        <!-- ===== FILTROS ===== -->
        <div class="filter-section mb-8">
            <div class="flex flex-wrap items-center justify-between gap-4">
                <h3 class="font-serif text-lg flex items-center gap-2">
                    <i class="fa-solid fa-sliders text-[var(--accent-gold)] text-sm"></i>
                    <span id="filters-title">Filtros</span>
                </h3>
                
                <div class="flex flex-wrap gap-4 items-center">
                    <div class="flex items-center gap-2">
                        <span class="text-xs text-[var(--text-secondary)]">Precio m√°x:</span>
                        <span id="price-value" class="text-[var(--accent-gold)] font-bold">$2000</span>
                        <input type="range" id="price-filter" min="40" max="5000" step="10" value="2000" class="filter-range w-32" oninput="updatePriceLabel()">
                    </div>
                    
                    <select id="stars-filter" class="selector-premium text-xs py-1.5" onchange="applyFilters()">
                        <option value="0">Todas las estrellas</option>
                        <option value="5">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ (5)</option>
                        <option value="4">‚òÖ‚òÖ‚òÖ‚òÖ (4+)</option>
                        <option value="3">‚òÖ‚òÖ‚òÖ (3+)</option>
                    </select>
                    
                    <select id="eco-filter" class="selector-premium text-xs py-1.5" onchange="applyFilters()">
                        <option value="all">Todos</option>
                        <option value="Carbon Neutral">üå± Carbon Neutral</option>
                        <option value="Eco Certified">üçÉ Eco Certified</option>
                        <option value="Zero Emissions">‚ö° Zero Emissions</option>
                        <option value="Solar Powered">‚òÄÔ∏è Solar Powered</option>
                    </select>
                    
                    <button onclick="resetFilters()" class="btn-silver text-xs px-3 py-1.5 rounded-full">
                        <i class="fa-regular fa-trash-can mr-1"></i> Reset
                    </button>
                </div>
            </div>
        </div>
        
        <!-- ===== ESTAD√çSTICAS ===== -->
        <div id="stats-section" class="mb-10">
            <div class="flex justify-between items-center mb-4">
                <h3 class="font-serif text-lg flex items-center gap-2">
                    <i class="fa-solid fa-chart-line text-[var(--accent-gold)] text-sm"></i>
                    <span id="stats-title">Destinos m√°s buscados</span>
                </h3>
                <button onclick="resetStats()" class="btn-silver text-xs px-3 py-1.5 rounded-full">
                    <i class="fa-solid fa-rotate-right mr-1"></i> Reset
                </button>
            </div>
            
            <div id="stats-container" class="grid grid-cols-2 md:grid-cols-4 gap-3"></div>
            <div id="total-searches" class="mt-3 text-right text-[0.55rem] text-[var(--text-secondary)] opacity-50"></div>
        </div>
        
        <!-- ===== AD 2: RECT√ÅNGULO ===== -->
        <div class="ad-container p-3 text-center mb-8">
            <div class="ad-label">PATROCINADO</div>
            <div class="h-32 flex items-center justify-center text-[var(--text-secondary)] text-xs">
                <i class="fa-regular fa-rectangle-ad mr-2"></i> Espacio 300x250
            </div>
        </div>
        
        <!-- ===== RESULTADOS ===== -->
        <div id="results-container">
            <div class="flex justify-between items-center mb-4">
                <h3 class="font-serif text-lg">
                    <span id="results-count">45</span> <span id="hotels-found">hoteles encontrados</span>
                </h3>
                <select id="sort-filter" class="selector-premium text-xs py-1.5" onchange="applyFilters()">
                    <option value="default">Ordenar por</option>
                    <option value="price-asc">Precio: menor a mayor</option>
                    <option value="price-desc">Precio: mayor a menor</option>
                    <option value="stars-desc">Estrellas: m√°s a menos</option>
                    <option value="eco">M√°s sostenibles</option>
                </select>
            </div>
            
            <div id="results" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
        </div>
        
        <!-- ===== AD 3: FOOTER ===== -->
        <div class="ad-container p-2 text-center my-8">
            <div class="ad-label">ENLACES PATROCINADOS</div>
            <div class="h-20 flex items-center justify-center text-[var(--text-secondary)] text-xs">
                <i class="fa-regular fa-rectangle-ad mr-2"></i> Espacio 728x90
            </div>
        </div>
    </main>
    
    <!-- ===== FOOTER ===== -->
    <footer class="max-w-7xl mx-auto mt-12 pt-8 border-t border-[var(--border-light)]">
        <div class="text-center">
            <p class="text-[0.6rem] text-[var(--text-secondary)] uppercase tracking-wider">
                ¬© 2026 ELITESTAY TRAVEL ‚Äî LUXURY & SUSTAINABLE HOTELS
            </p>
            <p class="text-[0.5rem] text-[var(--accent-gold)] opacity-30 uppercase tracking-[0.5em] mt-4">
                Member of The Elite Collection
            </p>
        </div>
    </footer>

    <script>
        // ============================================
        // CONFIGURACI√ìN PARA TU DOMINIO elitestaytravel.com
        // ============================================
        const API_CONFIG = {
            // ‚úÖ TU DOMINIO REAL
            baseURL: 'https://elitestaytravel.com',
            endpoints: {
                search: '/api/hoteles/buscar',      // Ajusta seg√∫n tu endpoint
                stats: '/api/estadisticas/guardar'  // Ajusta seg√∫n tu endpoint
            },
            headers: {
                'Content-Type': 'application/json',
                // Si tienes API Key, descomenta y agrega:
                // 'X-API-Key': 'TU-API-KEY-AQUI'
            }
        };
        
        // ============================================
        // 45 HOTELES DE EJEMPLO (para mostrar mientras tanto)
        // ============================================
        const HOTELES_DB = [
            // EUROPA (12)
            { id:1, nombre:"Grand Hotel Royal", ciudad:"Roma", pais:"Italia", marca:"The Luxury Collection", precio:895, estrellas:5, co2:12, eco_label:"Carbon Neutral", imagen:"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=300&auto=format", link:"https://booking.com/hotel/it/royal" },
            { id:2, nombre:"Villa Santorini", ciudad:"Santorini", pais:"Grecia", marca:"Elite Retreats", precio:1250, estrellas:5, co2:8, eco_label:"Eco Certified", imagen:"https://images.unsplash.com/photo-1582719508461-905c673771fd?w=400&h=300&auto=format", link:"https://booking.com/hotel/gr/santorini" },
            { id:3, nombre:"The Green Palace", ciudad:"Barcelona", pais:"Espa√±a", marca:"Sustainable Luxe", precio:720, estrellas:4, co2:5, eco_label:"Zero Emissions", imagen:"https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?w=400&h=300&auto=format", link:"https://booking.com/hotel/es/green" },
            { id:4, nombre:"Alpine Luxury Lodge", ciudad:"Zermatt", pais:"Suiza", marca:"Mountain Elite", precio:980, estrellas:5, co2:10, eco_label:"Energy Efficient", imagen:"https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=300&auto=format", link:"https://booking.com/hotel/ch/alpine" },
            { id:5, nombre:"Parisian Elegance", ciudad:"Paris", pais:"Francia", marca:"City Elite", precio:890, estrellas:5, co2:14, eco_label:"Urban Green", imagen:"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=300&auto=format", link:"https://booking.com/hotel/fr/paris" },
            { id:6, nombre:"Venice Canal Resort", ciudad:"Venecia", pais:"Italia", marca:"Heritage Collection", precio:1100, estrellas:5, co2:9, eco_label:"Water Conservation", imagen:"https://images.unsplash.com/photo-1582719508461-905c673771fd?w=400&h=300&auto=format", link:"https://booking.com/hotel/it/venice" },
            { id:31, nombre:"Budget Hostel Paris", ciudad:"Paris", pais:"Francia", marca:"Economy Stay", precio:45, estrellas:2, co2:3, eco_label:"Carbon Neutral", imagen:"https://images.unsplash.com/photo-1555854877-bab0e564b8d5?w=400&h=300&auto=format", link:"https://booking.com/hotel/fr/budget" },
            { id:32, nombre:"Cheap Hotel Rome", ciudad:"Roma", pais:"Italia", marca:"Budget Friendly", precio:55, estrellas:2, co2:4, eco_label:"Eco Certified", imagen:"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=300&auto=format", link:"https://booking.com/hotel/it/cheap" },
            { id:36, nombre:"London Luxury Inn", ciudad:"Londres", pais:"Reino Unido", marca:"British Elite", precio:950, estrellas:5, co2:15, eco_label:"Green Energy", imagen:"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=300&auto=format", link:"#" },
            { id:37, nombre:"Berlin Modern Hotel", ciudad:"Berlin", pais:"Alemania", marca:"German Elite", precio:680, estrellas:4, co2:11, eco_label:"Energy Efficient", imagen:"https://images.unsplash.com/photo-1582719508461-905c673771fd?w=400&h=300&auto=format", link:"#" },
            { id:44, nombre:"Amsterdam Canal House", ciudad:"Amsterdam", pais:"Holanda", marca:"Dutch Elite", precio:720, estrellas:4, co2:8, eco_label:"Green Energy", imagen:"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=300&auto=format", link:"#" },
            { id:45, nombre:"Vienna Palace Hotel", ciudad:"Viena", pais:"Austria", marca:"Austrian Elite", precio:580, estrellas:4, co2:7, eco_label:"Energy Efficient", imagen:"https://images.unsplash.com/photo-1582719508461-905c673771fd?w=400&h=300&auto=format", link:"#" },
            
            // ASIA (12)
            { id:7, nombre:"Ocean Front Reserve", ciudad:"Male", pais:"Maldivas", marca:"Elite Selection", precio:1650, estrellas:5, co2:15, eco_label:"Marine Protection", imagen:"https://images.unsplash.com/photo-1520250497591-112f2f40a3f4?w=400&h=300&auto=format", link:"https://booking.com/hotel/mv/ocean" },
            { id:8, nombre:"Bali Eco Villa", ciudad:"Ubud", pais:"Indonesia", marca:"Tropical Elite", precio:550, estrellas:4, co2:4, eco_label:"Rainforest Alliance", imagen:"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=300&auto=format", link:"https://booking.com/hotel/id/bali" },
            { id:9, nombre:"Tokyo Imperial", ciudad:"Tokio", pais:"Jap√≥n", marca:"Urban Luxury", precio:950, estrellas:5, co2:16, eco_label:"Smart Building", imagen:"https://images.unsplash.com/photo-1582719508461-905c673771fd?w=400&h=300&auto=format", link:"https://booking.com/hotel/jp/tokyo" },
            { id:10, nombre:"Bangkok Riverside", ciudad:"Bangkok", pais:"Tailandia", marca:"Asian Elite", precio:420, estrellas:4, co2:7, eco_label:"Local Community", imagen:"https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?w=400&h=300&auto=format", link:"https://booking.com/hotel/th/bangkok" },
            { id:11, nombre:"Singapore Suites", ciudad:"Singapur", pais:"Singapur", marca:"Modern Luxury", precio:780, estrellas:5, co2:11, eco_label:"Green Building", imagen:"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=300&auto=format", link:"https://booking.com/hotel/sg/singapore" },
            { id:12, nombre:"Dubai Palm Resort", ciudad:"Dubai", pais:"EAU", marca:"Desert Elite", precio:1450, estrellas:5, co2:22, eco_label:"Solar Powered", imagen:"https://images.unsplash.com/photo-1582719508461-905c673771fd?w=400&h=300&auto=format", link:"https://booking.com/hotel/ae/dubai" },
            { id:33, nombre:"Budget Inn Bangkok", ciudad:"Bangkok", pais:"Tailandia", marca:"Economy", precio:40, estrellas:2, co2:2, eco_label:"Local Community", imagen:"https://images.unsplash.com/photo-1555854877-bab0e564b8d5?w=400&h=300&auto=format", link:"https://booking.com/hotel/th/budget" },
            { id:34, nombre:"Cheap Hostel Tokyo", ciudad:"Tokio", pais:"Jap√≥n", marca:"Budget Stay", precio:65, estrellas:2, co2:5, eco_label:"Energy Efficient", imagen:"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=300&auto=format", link:"https://booking.com/hotel/jp/cheap" },
            { id:38, nombre:"Seoul Tower Hotel", ciudad:"Se√∫l", pais:"Corea del Sur", marca:"Korean Elite", precio:720, estrellas:4, co2:12, eco_label:"Smart Building", imagen:"https://images.unsplash.com/photo-1582719508461-905c673771fd?w=400&h=300&auto=format", link:"#" },
            { id:39, nombre:"Shanghai Pearl", ciudad:"Shanghai", pais:"China", marca:"Chinese Elite", precio:830, estrellas:5, co2:18, eco_label:"Urban Green", imagen:"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=300&auto=format", link:"#" },
            { id:46, nombre:"Mumbai Palace", ciudad:"Mumbai", pais:"India", marca:"Indian Elite", precio:420, estrellas:4, co2:9, eco_label:"Local Community", imagen:"https://images.unsplash.com/photo-1582719508461-905c673771fd?w=400&h=300&auto=format", link:"#" },
            { id:47, nombre:"Hanoi Pearl", ciudad:"Hanoi", pais:"Vietnam", marca:"Vietnamese Elite", precio:280, estrellas:3, co2:5, eco_label:"Eco Certified", imagen:"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=300&auto=format", link:"#" },
            
            // AM√âRICA (10)
            { id:13, nombre:"NYC Central Park", ciudad:"Nueva York", pais:"USA", marca:"City Elite", precio:850, estrellas:5, co2:18, eco_label:"Urban Green", imagen:"https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?w=400&h=300&auto=format", link:"https://booking.com/hotel/us/nyc" },
            { id:14, nombre:"Miami Beach House", ciudad:"Miami", pais:"USA", marca:"Coastal Elite", precio:690, estrellas:4, co2:13, eco_label:"Ocean Friendly", imagen:"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=300&auto=format", link:"https://booking.com/hotel/us/miami" },
            { id:15, nombre:"LA Hollywood", ciudad:"Los Angeles", pais:"USA", marca:"Star Collection", precio:920, estrellas:5, co2:19, eco_label:"Energy Star", imagen:"https://images.unsplash.com/photo-1582719508461-905c673771fd?w=400&h=300&auto=format", link:"https://booking.com/hotel/us/la" },
            { id:16, nombre:"Tulum Eco Resort", ciudad:"Tulum", pais:"M√©xico", marca:"Nature Elite", precio:480, estrellas:4, co2:6, eco_label:"Zero Waste", imagen:"https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?w=400&h=300&auto=format", link:"https://booking.com/hotel/mx/tulum" },
            { id:17, nombre:"Rio Copacabana", ciudad:"Rio", pais:"Brasil", marca:"Tropical Luxury", precio:590, estrellas:4, co2:10, eco_label:"Beach Clean", imagen:"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=300&auto=format", link:"https://booking.com/hotel/br/rio" },
            { id:35, nombre:"Hostel NYC", ciudad:"Nueva York", pais:"USA", marca:"Budget", precio:75, estrellas:2, co2:6, eco_label:"Urban Green", imagen:"https://images.unsplash.com/photo-1555854877-bab0e564b8d5?w=400&h=300&auto=format", link:"https://booking.com/hotel/us/hostel" },
            { id:40, nombre:"Toronto Tower", ciudad:"Toronto", pais:"Canad√°", marca:"Canadian Elite", precio:680, estrellas:4, co2:14, eco_label:"Green Energy", imagen:"https://images.unsplash.com/photo-1582719508461-905c673771fd?w=400&h=300&auto=format", link:"#" },
            { id:41, nombre:"Mexico City Palace", ciudad:"Ciudad de M√©xico", pais:"M√©xico", marca:"Mexican Elite", precio:380, estrellas:4, co2:8, eco_label:"Local Community", imagen:"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=300&auto=format", link:"#" },
            { id:48, nombre:"Buenos Aires Tango", ciudad:"Buenos Aires", pais:"Argentina", marca:"Argentine Elite", precio:320, estrellas:3, co2:6, eco_label:"Eco Certified", imagen:"https://images.unsplash.com/photo-1582719508461-905c673771fd?w=400&h=300&auto=format", link:"#" },
            { id:49, nombre:"Lima Coastal Hotel", ciudad:"Lima", pais:"Per√∫", marca:"Peruvian Elite", precio:290, estrellas:3, co2:5, eco_label:"Local Community", imagen:"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=300&auto=format", link:"#" },
            
            // √ÅFRICA (6)
            { id:18, nombre:"Safari Luxury Camp", ciudad:"Masai Mara", pais:"Kenia", marca:"Wild Elite", precio:1450, estrellas:5, co2:9, eco_label:"Conservation", imagen:"https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?w=400&h=300&auto=format", link:"https://booking.com/hotel/ke/safari" },
            { id:19, nombre:"Cape Town Villa", ciudad:"Ciudad del Cabo", pais:"Sud√°frica", marca:"Coastal Elite", precio:620, estrellas:4, co2:8, eco_label:"Marine Protection", imagen:"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=300&auto=format", link:"https://booking.com/hotel/za/cape" },
            { id:20, nombre:"Moroccan Palace", ciudad:"Marrakech", pais:"Marruecos", marca:"Heritage Elite", precio:430, estrellas:4, co2:5, eco_label:"Local Crafts", imagen:"https://images.unsplash.com/photo-1582719508461-905c673771fd?w=400&h=300&auto=format", link:"https://booking.com/hotel/ma/marrakech" },
            { id:42, nombre:"Cairo Pyramids View", ciudad:"El Cairo", pais:"Egipto", marca:"Egyptian Elite", precio:520, estrellas:4, co2:7, eco_label:"Heritage", imagen:"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=300&auto=format", link:"#" },
            { id:50, nombre:"Tunis Medina Hotel", ciudad:"T√∫nez", pais:"T√∫nez", marca:"North African Elite", precio:210, estrellas:3, co2:4, eco_label:"Local Crafts", imagen:"https://images.unsplash.com/photo-1582719508461-905c673771fd?w=400&h=300&auto=format", link:"#" },
            { id:51, nombre:"Victoria Falls Lodge", ciudad:"Livingstone", pais:"Zambia", marca:"African Elite", precio:780, estrellas:4, co2:8, eco_label:"Conservation", imagen:"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=300&auto=format", link:"#" },
            
            // OCEAN√çA (5)
            { id:21, nombre:"Sydney Opera Views", ciudad:"Sydney", pais:"Australia", marca:"Harbour Elite", precio:880, estrellas:5, co2:14, eco_label:"Green Energy", imagen:"https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?w=400&h=300&auto=format", link:"https://booking.com/hotel/au/sydney" },
            { id:22, nombre:"Fiji Island Resort", ciudad:"Fiji", pais:"Fiji", marca:"Island Elite", precio:1250, estrellas:5, co2:11, eco_label:"Coral Protection", imagen:"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=300&auto=format", link:"https://booking.com/hotel/fj/fiji" },
            { id:23, nombre:"New Zealand Lodge", ciudad:"Queenstown", pais:"Nueva Zelanda", marca:"Mountain Elite", precio:720, estrellas:4, co2:7, eco_label:"Carbon Neutral", imagen:"https://images.unsplash.com/photo-1582719508461-905c673771fd?w=400&h=300&auto=format", link:"https://booking.com/hotel/nz/queenstown" },
            { id:43, nombre:"Melbourne Central", ciudad:"Melbourne", pais:"Australia", marca:"Australian Elite", precio:690, estrellas:4, co2:13, eco_label:"Green Energy", imagen:"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=300&auto=format", link:"#" },
            { id:52, nombre:"Auckland Harbour", ciudad:"Auckland", pais:"Nueva Zelanda", marca:"Kiwi Elite", precio:540, estrellas:4, co2:8, eco_label:"Carbon Neutral", imagen:"https://images.unsplash.com/photo-1582719508461-905c673771fd?w=400&h=300&auto=format", link:"#" }
        ];

        // ============================================
        // ESTAD√çSTICAS
        // ============================================
        const STATS_KEY = 'elitestay_travel_stats';
        
        function getStats() {
            return JSON.parse(localStorage.getItem(STATS_KEY)) || { total: 0, cities: {} };
        }
        
        function saveStats(stats) {
            localStorage.setItem(STATS_KEY, JSON.stringify(stats));
        }
        
        async function registerSearch(city) {
            if (!city) return;
            
            // Guardar localmente
            let stats = getStats();
            let key = city.trim().toLowerCase();
            stats.total++;
            if (!stats.cities[key]) {
                stats.cities[key] = { count: 1, name: city.trim() };
            } else {
                stats.cities[key].count++;
            }
            saveStats(stats);
            renderStats();
            
            // Enviar a tu API Python
            try {
                await fetch(`${API_CONFIG.baseURL}${API_CONFIG.endpoints.stats}`, {
                    method: 'POST',
                    headers: API_CONFIG.headers,
                    body: JSON.stringify({ 
                        ciudad: city.trim(),
                        fecha: new Date().toISOString()
                    })
                });
            } catch (error) {
                console.log('Error enviando estad√≠stica a API:', error);
            }
        }
        
        function renderStats() {
            let stats = getStats();
            let container = document.getElementById('stats-container');
            let totalEl = document.getElementById('total-searches');
            if (!container) return;
            
            let cities = Object.values(stats.cities).sort((a, b) => b.count - a.count).slice(0, 4);
            let maxCount = cities.length ? Math.max(...cities.map(c => c.count)) : 1;
            
            if (!cities.length) {
                container.innerHTML = `<div class="col-span-4 text-center py-4 stat-card">
                    <p class="text-[var(--text-secondary)] text-xs">‚ú® Sin b√∫squedas a√∫n</p>
                </div>`;
            } else {
                container.innerHTML = cities.map(c => `
                    <div class="stat-card">
                        <div class="flex justify-between items-start mb-2">
                            <span class="font-serif text-sm">${c.name}</span>
                            <span class="text-[var(--accent-gold)] font-light">${c.count}</span>
                        </div>
                        <div class="stat-bar">
                            <div class="stat-bar-fill" style="width:${(c.count/maxCount)*100}%"></div>
                        </div>
                    </div>
                `).join('');
            }
            if (totalEl) totalEl.innerHTML = `<i class="fa-regular fa-eye"></i> ${stats.total} b√∫squedas realizadas`;
        }
        
        function resetStats() {
            if (confirm('¬øResetear todas las estad√≠sticas?')) {
                saveStats({ total: 0, cities: {} });
                renderStats();
            }
        }
        
        // ============================================
        // FILTROS Y ORDENAMIENTO
        // ============================================
        let filters = {
            city: '',
            maxPrice: 2000,
            stars: 0,
            eco: 'all',
            sort: 'default'
        };
        
        function normalizeText(text) {
            return text.toLowerCase()
                .normalize("NFD").replace(/[\u0300-\u036f]/g, "")
                .replace(/[^a-z0-9]/g, '');
        }
        
        function updatePriceLabel() {
            let val = document.getElementById('price-filter').value;
            document.getElementById('price-value').textContent = '$' + val;
            filters.maxPrice = parseInt(val);
            applyFilters();
        }
        
        function applyFilters() {
            filters.stars = parseInt(document.getElementById('stars-filter').value) || 0;
            filters.eco = document.getElementById('eco-filter').value;
            filters.sort = document.getElementById('sort-filter').value;
            
            let filtered = HOTELES_DB.filter(h => {
                if (filters.city && filters.city.trim() !== '') {
                    let searchTerm = normalizeText(filters.city);
                    let ciudadNorm = normalizeText(h.ciudad);
                    let nombreNorm = normalizeText(h.nombre);
                    let paisNorm = normalizeText(h.pais);
                    
                    let matches = ciudadNorm.includes(searchTerm) || 
                                 nombreNorm.includes(searchTerm) ||
                                 paisNorm.includes(searchTerm);
                    
                    if (!matches) return false;
                }
                
                if (h.precio > filters.maxPrice) return false;
                if (filters.stars > 0 && h.estrellas < filters.stars) return false;
                if (filters.eco !== 'all' && h.eco_label !== filters.eco) return false;
                
                return true;
            });
            
            if (filters.sort === 'price-asc') filtered.sort((a, b) => a.precio - b.precio);
            if (filters.sort === 'price-desc') filtered.sort((a, b) => b.precio - a.precio);
            if (filters.sort === 'stars-desc') filtered.sort((a, b) => b.estrellas - a.estrellas);
            if (filters.sort === 'eco') filtered.sort((a, b) => a.co2 - b.co2);
            
            document.getElementById('results-count').textContent = filtered.length;
            renderHoteles(filtered);
        }
        
        function resetFilters() {
            document.getElementById('price-filter').value = 2000;
            document.getElementById('price-value').textContent = '$2000';
            document.getElementById('stars-filter').value = '0';
            document.getElementById('eco-filter').value = 'all';
            document.getElementById('sort-filter').value = 'default';
            
            filters = {
                city: '',
                maxPrice: 2000,
                stars: 0,
                eco: 'all',
                sort: 'default'
            };
            
            applyFilters();
        }
        
        // ============================================
        // RENDERIZAR HOTELES
        // ============================================
        function renderHoteles(hoteles) {
            let container = document.getElementById('results');
            let lang = document.getElementById('lang').value;
            let t = texts[lang] || texts.es;
            
            if (!hoteles.length) {
                container.innerHTML = `<div class="col-span-full text-center py-16">
                    <p class="text-[var(--text-secondary)] italic">No hay hoteles que coincidan con los filtros</p>
                </div>`;
                return;
            }
            
            container.innerHTML = hoteles.map((h, i) => `
                <div class="hotel-card rounded-xl overflow-hidden fade-in-up" style="animation-delay: ${i*0.05}s">
                    <div class="hotel-img-container relative">
                        <img src="${h.imagen}" alt="${h.nombre}" loading="lazy">
                        <div class="absolute top-3 right-3 bg-black/50 backdrop-blur-sm px-2 py-1 rounded-full text-xs text-amber-400">
                            ${"‚òÖ".repeat(h.estrellas)}
                        </div>
                        ${i < 3 ? `
                        <div class="absolute top-3 left-3">
                            <span class="badge-gold">${t.top}</span>
                        </div>` : ''}
                    </div>
                    <div class="p-5">
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <span class="text-[0.5rem] text-[var(--accent-gold)] uppercase tracking-wider">${h.marca}</span>
                                <h3 class="text-lg font-serif mt-0.5">${h.nombre}</h3>
                                <p class="text-xs text-[var(--text-secondary)]">${h.ciudad}, ${h.pais}</p>
                            </div>
                            <div class="text-right">
                                <span class="text-xl text-[var(--accent-gold)]">$${h.precio}</span>
                                <p class="text-[0.45rem] text-[var(--text-secondary)] uppercase">USD/noche</p>
                            </div>
                        </div>
                        <div class="flex flex-wrap gap-2 mb-4">
                            <span class="badge-eco"><i class="fa-solid fa-leaf mr-1 text-xs"></i>${h.co2} kg CO‚ÇÇ</span>
                            <span class="badge-eco">${h.eco_label}</span>
                        </div>
                        <a href="${h.link}" target="_blank" class="block btn-gold text-center py-2.5 rounded-lg text-xs uppercase tracking-wider">
                            Reservar en Booking
                        </a>
                    </div>
                </div>
            `).join('');
        }
        
        // ============================================
        // SISTEMA DE IDIOMAS
        // ============================================
        const texts = {
            es: {
                title: "Encuentra tu", highlight: "refugio exclusivo",
                dest: "Destino", in: "Llegada", out: "Salida", btn: "Buscar",
                wait: "Buscando experiencias...", top: "Selecci√≥n Elite", 
                filters: "Filtros", stats: "Destinos m√°s buscados",
                hotels: "hoteles encontrados"
            },
            en: {
                title: "Find your", highlight: "exclusive sanctuary",
                dest: "Destination", in: "Check-in", out: "Check-out", btn: "Search",
                wait: "Searching experiences...", top: "Elite Selection", 
                filters: "Filters", stats: "Most searched destinations",
                hotels: "hotels found"
            },
            fr: {
                title: "Trouvez votre", highlight: "sanctuaire exclusif",
                dest: "Destination", in: "Arriv√©e", out: "D√©part", btn: "Rechercher",
                wait: "Recherche en cours...", top: "S√©lection Elite", 
                filters: "Filtres", stats: "Destinations les plus recherch√©es",
                hotels: "h√¥tels trouv√©s"
            }
        };
        
        function updateLang() {
            let l = document.getElementById('lang').value;
            let t = texts[l] || texts.es;
            
            document.getElementById('search-title').textContent = t.title;
            document.getElementById('search-highlight').textContent = t.highlight;
            document.getElementById('l-dest').textContent = t.dest;
            document.getElementById('l-in').textContent = t.in;
            document.getElementById('l-out').textContent = t.out;
            document.getElementById('btn').textContent = t.btn;
            document.getElementById('filters-title').textContent = t.filters;
            document.getElementById('stats-title').textContent = t.stats;
            document.getElementById('hotels-found').textContent = t.hotels;
            
            applyFilters();
        }
        
        // ============================================
        // B√öSQUEDA PRINCIPAL - CONECTADA A TU API PYTHON
        // ============================================
        async function buscar() {
            let city = document.getElementById('city').value;
            let cin = document.getElementById('cin').value;
            let cout = document.getElementById('cout').value;
            let lang = document.getElementById('lang').value;
            let t = texts[lang] || texts.es;
            
            if (!city || !cin || !cout) {
                alert("Por favor completa todos los campos");
                return;
            }
            
            // Guardar estad√≠stica localmente y enviar a API
            registerSearch(city);
            
            // Actualizar filtro de ciudad
            filters.city = city;
            
            // Mostrar loading
            document.getElementById('results').innerHTML = `
                <div class="col-span-full text-center py-16">
                    <p class="text-[var(--accent-gold)] text-sm animate-pulse">${t.wait}</p>
                </div>
            `;
            
            try {
                // ‚úÖ LLAMADA A TU API PYTHON EN elitestaytravel.com
                console.log('Conectando a API:', `${API_CONFIG.baseURL}${API_CONFIG.endpoints.search}?ciudad=${encodeURIComponent(city)}&entrada=${cin}&salida=${cout}`);
                
                const response = await fetch(
                    `${API_CONFIG.baseURL}${API_CONFIG.endpoints.search}?ciudad=${encodeURIComponent(city)}&entrada=${cin}&salida=${cout}`,
                    { 
                        method: 'GET',
                        headers: API_CONFIG.headers,
                        mode: 'cors'
                    }
                );
                
                if (!response.ok) {
                    throw new Error(`Error HTTP: ${response.status}`);
                }
                
                const data = await response.json();
                
                // Verificar formato de respuesta
                if (data.hoteles && Array.isArray(data.hoteles)) {
                    // Usar datos de la API
                    renderHoteles(data.hoteles);
                    document.getElementById('results-count').textContent = data.hoteles.length;
                    
                    // Actualizar filtros con datos reales si es necesario
                    // (opcional, depende de tu API)
                } else {
                    console.warn('Formato de respuesta inesperado, usando datos locales');
                    applyFilters();
                }
                
            } catch (error) {
                console.error('Error conectando con API Python:', error);
                
                // Fallback a datos locales si la API falla
                document.getElementById('results').innerHTML = `
                    <div class="col-span-full text-center py-16">
                        <p class="text-red-400/80 text-sm">Error conectando con el servidor. Mostrando datos de ejemplo.</p>
                        <p class="text-[var(--text-secondary)] text-xs mt-2">${error.message}</p>
                    </div>
                `;
                
                // Mostrar datos locales despu√©s de 1 segundo
                setTimeout(() => {
                    applyFilters();
                }, 1000);
            }
        }
        
        // ============================================
        // TEMA OSCURO/CLARO
        // ============================================
        function toggleTheme() {
            let current = document.documentElement.getAttribute('data-theme') || 'dark';
            let newTheme = current === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            
            let icon = document.querySelector('#themeToggle i');
            icon.className = newTheme === 'dark' ? 'fa-regular fa-sun' : 'fa-regular fa-moon';
            localStorage.setItem('elitestay_theme', newTheme);
        }
        
        function initTheme() {
            let saved = localStorage.getItem('elitestay_theme') || 'dark';
            document.documentElement.setAttribute('data-theme', saved);
            let icon = document.querySelector('#themeToggle i');
            icon.className = saved === 'dark' ? 'fa-regular fa-sun' : 'fa-regular fa-moon';
        }
        
        // ============================================
        // INICIALIZACI√ìN
        // ============================================
        document.addEventListener('DOMContentLoaded', () => {
            initTheme();
            updateLang();
            renderStats();
            
            // Mostrar hoteles de ejemplo al cargar
            renderHoteles(HOTELES_DB);
            document.getElementById('results-count').textContent = HOTELES_DB.length;
            
            console.log('‚úÖ EliteStayTravel.com cargado - API configurada para:', API_CONFIG.baseURL);
        });
    </script>
</body>
</html>